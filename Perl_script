#!/usr/bin/perl -w

use strict;
use LWP::Simple;

my $url = shift || die "Please provide initial source";
my $max = 10;

my $html = get($url);

my @urls;
while ($html =~ s/(http:\/\/\S+)[">]//) {
 push @urls, $1;
}

mkdir "web", 0755;

open(my $file, ">", "web/url.map") || die "can't open file";
my $count = 0;

for (my $i=0; $i<$max; $i++) {
 my $source = $urls[int(rand($#urls+1))];
 getstore($source, "web/web$count.html");
 print $file "$count \t $source \n";
 print STDERR "getting $count from $source\n";
 $count++;
 }

close $file;
